Return-Path: <linux-spi+bounces-10519-lists+linux-spi=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-spi@lfdr.de
Delivered-To: lists+linux-spi@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [147.75.80.249])
	by mail.lfdr.de (Postfix) with ESMTPS id 34CCCBCBF9E
	for <lists+linux-spi@lfdr.de>; Fri, 10 Oct 2025 09:50:40 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id 152691A63B44
	for <lists+linux-spi@lfdr.de>; Fri, 10 Oct 2025 07:51:03 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 0355B27281C;
	Fri, 10 Oct 2025 07:50:34 +0000 (UTC)
X-Original-To: linux-spi@vger.kernel.org
Received: from TYDPR03CU002.outbound.protection.outlook.com (mail-japaneastazon11023109.outbound.protection.outlook.com [52.101.127.109])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 0B6B627057D;
	Fri, 10 Oct 2025 07:50:29 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=fail smtp.client-ip=52.101.127.109
ARC-Seal:i=2; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1760082633; cv=fail; b=iPsjN1dYH1QYTx1Mmt+rEVmpzlJCFtAfh8wtg/XyVOG+XdhiaH/OmqEoZN1mHA2gu/n+XJ4UtP4roiMXoOjo7JGnTCNWQ+ijPT4+BlTv2keMEbUfeNeWArfJYJNqgw7ejBSSr9iJ5K4Z2+8GJbM1Gqip8zsQbhzDvaqFzg8dL2I=
ARC-Message-Signature:i=2; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1760082633; c=relaxed/simple;
	bh=rj1nQJr14/UfHSzbyEdmmmD5jCFIfjGxl1ZhTXO9v6k=;
	h=From:To:CC:Subject:Date:Message-ID:References:In-Reply-To:
	 Content-Type:MIME-Version; b=VrCAuOczTKCrSYTAi6Y0431JKG4tuZAxVxvdoUvfVTEU1gsPqqn9kiEoX+Q1cIdD2zUoUYQwmLFp5emqGakSmOhZAIJ4QA3J8P17TxiPXVvI0fGQS/Xffhptutg91LTji03eWgJbud/YQiiN74+LSZ85rfl3TSCZI1JzVRV40Mg=
ARC-Authentication-Results:i=2; smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=cixtech.com; spf=pass smtp.mailfrom=cixtech.com; arc=fail smtp.client-ip=52.101.127.109
Authentication-Results: smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=cixtech.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=cixtech.com
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=qK7g3SHe6m9Lq+mKl76naBi5h3KvSmZVR5UQHybN9KtE+pibnqXeOzMzNFaIZVp2dwMcpGEmOiKItr0OV6naqssf1Uc1Ou+QfJ/6HLhq488DrOZ5j5moy+K0CSOtuQhqAs4l4n+uGRw0ob34zE9oB02AIgbX7GbJWuLMz/GmvKOxwcNufO5Ftj5ZOnuL81Fgg/+vBjl1X2DMhAHzRAu8ZJcqrO95JbOIJOJKi0jM2saoSInpgSBHIjVFw70tyPF+RcaQd206pEeqxeQt1XMBpjbBW6bW213xb0PkwYmTi3FKI94/nDtzEB9UMNq4bNEJxKsFNQyjf6Mieci6BGcCKA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=rj1nQJr14/UfHSzbyEdmmmD5jCFIfjGxl1ZhTXO9v6k=;
 b=HzLZXNR3tcl9G6VH3rpucY46sqxkqTYGEeB/Lobcc8aa31Iigj9ippRn7RNQFAnVxATioChDt94Kk1LeZXX8xKLdMAioc3PHeNPf3dUcH20AQE4jNUuqU+l091Dg6s7phjbM22/A+n8E5bZTmE7alBQ1u7ZjCrH9EkHs1mzI/wR9X1yzXB+E3oqewB72V1Tj8q/q2d3xGA7HtWaVg/4pT+hs4oV8CYpbHeNJOb5QB77qwY6uEys1U84GHvq/ZOJ0+LEKMSZFSjrXqQu/ElJ3P4uirvN5Qc4s+Mj0j9q2DiTiBJ2rfZEsRR/9LMeTHfTFFfgcHXcthaTGiYDURCtY2A==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=cixtech.com; dmarc=pass action=none header.from=cixtech.com;
 dkim=pass header.d=cixtech.com; arc=none
Received: from SI6PR06MB7104.apcprd06.prod.outlook.com (2603:1096:4:247::10)
 by PUZPR06MB5984.apcprd06.prod.outlook.com (2603:1096:301:118::6) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.9203.10; Fri, 10 Oct
 2025 07:50:24 +0000
Received: from SI6PR06MB7104.apcprd06.prod.outlook.com
 ([fe80::dd63:8fb9:b9d8:2887]) by SI6PR06MB7104.apcprd06.prod.outlook.com
 ([fe80::dd63:8fb9:b9d8:2887%7]) with mapi id 15.20.9203.009; Fri, 10 Oct 2025
 07:50:24 +0000
From: Jun Guo <Jun.Guo@cixtech.com>
To: "broonie@kernel.org" <broonie@kernel.org>
CC: "linux-spi@vger.kernel.org" <linux-spi@vger.kernel.org>,
	"michal.simek@amd.com" <michal.simek@amd.com>, cix-kernel-upstream
	<cix-kernel-upstream@cixtech.com>, "linux-arm-kernel@lists.infradead.org"
	<linux-arm-kernel@lists.infradead.org>, "devicetree@vger.kernel.org"
	<devicetree@vger.kernel.org>, "linux-kernel@vger.kernel.org"
	<linux-kernel@vger.kernel.org>, Fugang Duan <fugang.duan@cixtech.com>, Peter
 Chen <peter.chen@cixtech.com>, Rob Herring <robh@kernel.org>, Krzysztof
 Kozlowski <krzk+dt@kernel.org>, Conor Dooley <conor+dt@kernel.org>
Subject:
 =?gb2312?B?u9i4tDogW1BBVENIIDIvM10gc3BpOiBzcGktY2FkZW5jZTogc3VwcG9ydHMg?=
 =?gb2312?B?dHJhbnNtaXNzaW9uIHdpdGggYml0c19wZXJfd29yZCBvZiAxNiBhbmQgMzI=?=
Thread-Topic: [PATCH 2/3] spi: spi-cadence: supports transmission with
 bits_per_word of 16 and 32
Thread-Index: AQHcMd/H+Qf6JDptjkm1gafDrVixVbS7EJT4
Date: Fri, 10 Oct 2025 07:50:24 +0000
Message-ID:
 <SI6PR06MB7104D8834A40A802CF6CB085FFEFA@SI6PR06MB7104.apcprd06.prod.outlook.com>
References: <20250930075644.1665970-1-jun.guo@cixtech.com>
 <20250930075644.1665970-3-jun.guo@cixtech.com>
In-Reply-To: <20250930075644.1665970-3-jun.guo@cixtech.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
msip_labels:
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=cixtech.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: SI6PR06MB7104:EE_|PUZPR06MB5984:EE_
x-ms-office365-filtering-correlation-id: a4c3fe73-9ac2-4ce5-09e4-08de07d1abda
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;ARA:13230040|366016|1800799024|376014|38070700021;
x-microsoft-antispam-message-info:
 =?gb2312?B?Q2JZcnpqUkhFQXVDMzRDalVEdWpGU29zTG55REVCNlprVmNrbEJ4ZWFMNXN4?=
 =?gb2312?B?Qi81MFNHdG44VHd6dENPQW8yTlRJSU9FNmNhZUkyUVFXMU9oYTJVNTFNYllL?=
 =?gb2312?B?N1hJNUJMNE1FS3l6Q0k3bERzakdWbGMvSTRYMGlKRWwySW1qQnRvYmo5ZDNQ?=
 =?gb2312?B?OGp3MWtEYzUxZzNlRy8xalgrSWpSY01WN01oS0hHSW9yaUtnUWl3alpBaFAr?=
 =?gb2312?B?MHJaTkoyRFQ3b2xiZG5td2ppTHR0djdEeFZwVEhhK1lES2t4VW8zWUdKZlB2?=
 =?gb2312?B?R3BlVlM4VzB4elhQNkljaGFvckJxWXFWRzVRSW1rRXgzNEFERmtPWWdLQjRS?=
 =?gb2312?B?cm03V2RxbWZLRkFJbHhDZTJVQlVyNVU1YmVSZ0dUMFY2Mng1U1I1V3hFVk1K?=
 =?gb2312?B?cVgwM0plTDAyS3hGSHF3SVMxVlhITVplWnJxdzBmME5VbEtMVTFWOE1kcHdz?=
 =?gb2312?B?QytFU3VmNzRURVBEVTQwVlBqRzNzaU9hcG1Wa25hVkRwR2x1K0l5RXhjQnFl?=
 =?gb2312?B?ck5lb281Sm1ObmwxQXl4M2U1QWFQQlc5L21vVTNpbndGR0F2aStsSHJqMmw1?=
 =?gb2312?B?Uy85MlRKZlNxemIvUGhJZkZsdklQcXdQTkJQUXQydEdJdDdpRUptL0IyVTF6?=
 =?gb2312?B?aXdGcnBFVFdrYWZoNEtUNEJaWjBFNnNYRUV5VzNPWlJZTmVRRlhIOGwrZVRR?=
 =?gb2312?B?OVpaajFRWWk5N005d2xHUmQ2TVNGZ2xZOVBCTmJVRENTMTR5UE1hNDBHVHkz?=
 =?gb2312?B?c0JhTHMxTW9jOHFvd2tFU3hwWXJ5WDJmbGFwK0F0bjIxKzNRUUpITmxnZGhU?=
 =?gb2312?B?dXRWOUtZRW1uTmhwVXBucTdNVUc2RGl2MHFRV2twcnFhUTJ6eUNzQjR0RkZ6?=
 =?gb2312?B?cjVFM09WUnlyWmZDUzVXUkhWcGxDdnkrRnZXVUZtYWlWVGVIM210aVVtbC9t?=
 =?gb2312?B?N0FJT2hBRFNkWWh4V0R2QTd3dzk1eDZEQm1XZURPcFNJa2dqdTIzL0J0YVBY?=
 =?gb2312?B?MVpKN2NUQWlKRVFocHA3SUw2SnM0aVBUY01yenA3dWVlYWJZOVpIMDRHVUJE?=
 =?gb2312?B?WXMxZGNRYlNWZ0pNcGZVdkxQaktucmJGMW44SFExRmxEQzFBVHZVMk0xWm4y?=
 =?gb2312?B?dWpRMHFmRkxhNXpKK3NGZlZpaEVwQk5RSm5VMlZUVjgzZzRNcFljZGF1cEhH?=
 =?gb2312?B?aUpGZ0RHZlZsT1ZGNTVhTWkzVkVIVlRrQVVlaUVjaXVDdkdNaHNDQi9qaVJZ?=
 =?gb2312?B?ajFJd1pUcEprYlpObzdqaFBFN0VBYk9xVTN3bEJnMy9lTWtzVVBJeVVUMExn?=
 =?gb2312?B?ZGJYbjZhU2hHVERsdVY3dW5jVG1RQ0wzNnd2NzJvSjQycVpvdXY3OGp4bmF4?=
 =?gb2312?B?b01nQ24wNzh1Tkg5ZHlEbjZ0RG1yWUdYWDY4UEREMUczNHgxWDdaVjBsc2g4?=
 =?gb2312?B?WmJybWY0Z3hjaHlnOWc3dVUrS2UrQ1dMRjBnZkVCSU84UWtUM1Q2eUFVNldR?=
 =?gb2312?B?RHNzbnZ0WEpqMWdQMEw4Y214RnB6cER5b3AzVjQ1aElLMEE3Qzg5VmhubEUz?=
 =?gb2312?B?SmZ4RnJwQXJsbGRQYlppTnNiQ1ZlY2JZbXhsUW5xOUpRMkNMbDhQbWRBdnV0?=
 =?gb2312?B?dDZQNmdvOHJHOW95R1RieVVHY0YyY0tkWDJvblBuVUtDTVd0RUdZTGt1aFZZ?=
 =?gb2312?B?NGhlUldndEIwSXFBNDFvYlRPRVZJQ1VjRXExdUVCaWpjejEzZTgzRWdLbUdk?=
 =?gb2312?B?bVc5VEl4RUFsQ1pldDVUc3R6cjZ3dXpXS2dGVm9FVzJWUkpEcU1oVDh4RjV2?=
 =?gb2312?B?OEYwazdCclppRzFoeTgrL0xMZFF2c0lCSVJIWVhLNTdDanMxbjE1cVB3MzdH?=
 =?gb2312?B?YlR5YjRUaDJ3WDdUQjR2M3drTml6eUVzY0VSRWhITng2NmM5cEJxSkx3dWZo?=
 =?gb2312?B?R3dWeFBuKzFMVjI4YmRlV1ZGN0dYMUw1S3d5RzZBT3lUNk1WTFZnZDZQNjFv?=
 =?gb2312?B?NXdsd2YzbHZaQWlFYjVkZitpbmwrclljNWRPdW5yT3YvWHEraENKNTVRdDUz?=
 =?gb2312?Q?6AmElv?=
x-forefront-antispam-report:
 CIP:255.255.255.255;CTRY:;LANG:zh-cn;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:SI6PR06MB7104.apcprd06.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230040)(366016)(1800799024)(376014)(38070700021);DIR:OUT;SFP:1102;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0:
 =?gb2312?B?dGVvNzNWU05jaU1aeGFPSk1YQk5hZnhwbUVkVzU0N2JibjFyTDlsQ0tiMGZZ?=
 =?gb2312?B?M1NpaXdzQ1dBMHdUTWQ1YjZrcW5JdlE4aGxJMXdnUmsyOG9CWndRSTVMWWJ1?=
 =?gb2312?B?d0RUaDRXeE9zcjU5Qi9LamVqaXJCUkt1NEpNT0wzYkxGTjhYbTZ1RVFWYTU4?=
 =?gb2312?B?dUVXTVo3KzhLMUZkVnhBcUc2ZGJnTGpDMHhPUk1jUjZZMEFXMWhIQUw4OEJG?=
 =?gb2312?B?Zmg1UXFpU1RablpmMml5ZjY2dXh5cE9xRmhDV1RmTEtSTU03OHlYMHdENG1Q?=
 =?gb2312?B?MDYrMVdTdStvR0phYmdZR0ZES2FrNnMvWWR2SGdQWGJpaU10bmZnd2xJSG1F?=
 =?gb2312?B?QldzTUFoYXFrQzFaa0IxSmk1ZmQ2VitzMXNqeFhjTmZDRlJTS0ZkTmxOalda?=
 =?gb2312?B?bDcvdUJ1eDhyZ0FYRnF0OXVZRXdVd3dsRXNFL0xHNm1RUFpmNFQxUUo3RXJ4?=
 =?gb2312?B?c1B5ZVpaOFdXM0J4Zjg3R0tTMmo2NkZjaFJhbnpQYkc2b3BlNi9LQklFRFA4?=
 =?gb2312?B?RVRKQUlzT1JCU2R3bGszQVNSK2R3RmcwQ0FsSFFpbUhBd1lmVkRoWEpnR3R5?=
 =?gb2312?B?ckJ1cFpUS09VUitaTi9UK242NkhLSWpJME5LMTlYRjhnRXlzWnk3UkpSUFNp?=
 =?gb2312?B?V3h1RTdVakpSVEVxTWhUNUd3bVlmVUxPZm1UZXdDK1JFL1JqTzZ2NjlMb0ZV?=
 =?gb2312?B?VjZOb1JITDVyYjdmQjFHak8rMndsL3RkWWo0QU5VNlVxZ2tNMXNwUXk3Qy9v?=
 =?gb2312?B?TXNmRXJDNW5yRFhtc2RXMVZTclRHbUVZUlRHT1pMOHNxQ3FXNTc5d2VJT1ZG?=
 =?gb2312?B?UE9saEVpRGw3VmlXcldIT0ZOREZ4L2ppSUlTVTU2eDc3ZElpdWRZYzlLaHl1?=
 =?gb2312?B?eXRZVWFwZVl4blBEVVlpK1dJN29wU1dvUUNrUVZjZlJTM1dDVit4eFR5R3R4?=
 =?gb2312?B?RWJnRy9qa2w0UVpzN2Q0ZEw1Mndwdi9OcHFlRmlFK1RZQlNxRnFmSE5JZjVV?=
 =?gb2312?B?S0thMG1WT0F5dXRHZ1RnWW9uVXVvUDhzM216RUs1bDFPam1rK2tIcUppbGtQ?=
 =?gb2312?B?dHc2WmZWaXJMNkl2eEoxeU5GL1NJMEtFaExlazIvdnJKM1NkTzNPUWdWM1JU?=
 =?gb2312?B?dmlMcEVPUXp6OWl0aGI3R25LVEhxVmQ4NkwyRmUvekxOcHNqdHBvUGdGYTJ2?=
 =?gb2312?B?YVRiZlFlSnp5Uy9PbzV1L2Q4Rzkzc09CdVJnOEtSc3NjNnRLb3k1RnMrOGt5?=
 =?gb2312?B?clgyb3h2V1g4bDFZODR1dHROL2pOUDR1SUVNOWdvWFlHVVlXL3AwZVFVaE1o?=
 =?gb2312?B?d2xMOHNwMnJDelVUWEg3OExnUm1qRWI4a0tROGs3WUo4c2YwcDVVd05Hb0hH?=
 =?gb2312?B?ZldKOCtrcUdJaGtwblpwZVpUdStiRGVyQURKcDJPZmFWeGpmVFdjSy9yZDk4?=
 =?gb2312?B?UWpqRW5uY1JSWmJzL0xybmRmU0NYSUF6MVF1WXhMaGVPMkx2RVVZSFFsL2h0?=
 =?gb2312?B?citLTXF4V3dFYnhUb2dOTGthdXN0NEFQWUUyZ3dqWm5GK3R5SW5CTGdCNzRB?=
 =?gb2312?B?a2RXa1owbUViREpZK3J3a1FqVHFZYy9QaDB3MFBJaEVsbllneTRXNXRKaFpQ?=
 =?gb2312?B?Tk44TmRQT3E1YklrbGtHWWQxM0R1MzZ6dzlJZGRSTGkvZUZ4UkZKQTVPOXBk?=
 =?gb2312?B?OFErMW9IREpTSHM4ZHgzMXlRQ29NMHlmN2YvYnhPRlJtaHNvSytKK0gwL1Ir?=
 =?gb2312?B?S0tVYzJmVmVuTXM0NENDcU9qNTYrK0tyRmE4L1lhdzluVW8rMG5SWGkweml1?=
 =?gb2312?B?bUFzRHFJSkVIOFdwdmNtQ1FBSTBOWmdCRklGNE1lNXpDRG1HdDJaYWJtNGEv?=
 =?gb2312?B?MFRDY01kVTEvd3ZGT1ZLQmFsMVJLZjRWeTNwL0d3NnJzYWlHc2JXWGhBanFD?=
 =?gb2312?B?aEJjeFVmTlRxN0xuQ1lFc0YrOUpobzZwbm1HMGVyQ0taS1FrYTUrb2Rnd0Jw?=
 =?gb2312?B?empaM2EwU29GemYxanZmMjNnY3VrRnpKMjVQL0I2dWd1a0lTMWk5anBnV25v?=
 =?gb2312?B?dDJYVHAvRFRWK1BwWUlDcU1ZbmtjRGJIdDRDbTFkdnFLRXBIcjVRc2ZuaEpj?=
 =?gb2312?Q?HLZQ=3D?=
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
Precedence: bulk
X-Mailing-List: linux-spi@vger.kernel.org
List-Id: <linux-spi.vger.kernel.org>
List-Subscribe: <mailto:linux-spi+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-spi+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
X-OriginatorOrg: cixtech.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: SI6PR06MB7104.apcprd06.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: a4c3fe73-9ac2-4ce5-09e4-08de07d1abda
X-MS-Exchange-CrossTenant-originalarrivaltime: 10 Oct 2025 07:50:24.5555
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 0409f77a-e53d-4d23-943e-ccade7cb4811
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: enbm5j+p+LIMn+h/akDglbvGDcvx4BZscELgZhTDVfMfNbstRC9E1voEMLx+Q0LqCgpoQcXG6+aVb60rJ9XFqA==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: PUZPR06MB5984

T24gOS8zMC8yMDI1IDM6NTYgUE0sIEp1biBHdW8gd3JvdGU6DQo+IFRoZSBDYWRlbmNlIElQIHN1
cHBvcnRzIGNvbmZpZ3VyYWJsZSBGSUZPIGRhdGEgd2lkdGhzIG9mIDE2IGJpdHMgb3INCj4gMzIg
Yml0cyBkdXJpbmcgaW50ZWdyYXRpb24uIFRoZSBkZWZhdWx0IEZJRk8gZGF0YSB3aWR0aCBpcyA4
IGJpdHMuDQo+IElmIHRoZSBjaGlwIGRlc2lnbiBtb2RpZmllcyB0aGUgRklGTyBkYXRhIHdpZHRo
IHRvIDE2IGJpdHMgb3IgMzIgYml0cywNCj4gdGhlIGZpZm8td2lkdGggcHJvcGVydHkgY2FuIGJl
IGNvbmZpZ3VyZWQgaW4gdGhlIGZpcm13YXJlIChEVC9BQ1BJKQ0KPiB0byBlbmFibGUgdGhlIGRy
aXZlciB0byBzdXBwb3J0IGRhdGEgdHJhbnNmZXJzIGF0IHRoZSBjb3JyZXNwb25kaW5nIHdpZHRo
Lg0KPg0KPiBTaWduZWQtb2ZmLWJ5OiBKdW4gR3VvIDxqdW4uZ3VvQGNpeHRlY2guY29tPg0KPiAt
LS0NCj4gICBkcml2ZXJzL3NwaS9zcGktY2FkZW5jZS5jIHwgMTI1ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKystLS0tDQo+ICAgMSBmaWxlIGNoYW5nZWQsIDExMiBpbnNlcnRpb25z
KCspLCAxMyBkZWxldGlvbnMoLSkNCj4NCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3BpL3NwaS1j
YWRlbmNlLmMgYi9kcml2ZXJzL3NwaS9zcGktY2FkZW5jZS5jDQo+IGluZGV4IDVhZTA5YjIxZDIz
YS4uZTkxYzZhZmJlY2U5IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL3NwaS9zcGktY2FkZW5jZS5j
DQo+ICsrKyBiL2RyaXZlcnMvc3BpL3NwaS1jYWRlbmNlLmMNCj4gQEAgLTEwOSw5ICsxMDksMTEg
QEANCj4gICAgKiBAcnhidWY6ICAgICAgICAgIFBvaW50ZXIgdG8gdGhlIFJYIGJ1ZmZlcg0KPiAg
ICAqIEB0eF9ieXRlczogICAgICAgICAgICAgICBOdW1iZXIgb2YgYnl0ZXMgbGVmdCB0byB0cmFu
c2Zlcg0KPiAgICAqIEByeF9ieXRlczogICAgICAgICAgICAgICBOdW1iZXIgb2YgYnl0ZXMgcmVx
dWVzdGVkDQo+ICsgKiBAbl9ieXRlczogICAgICAgICBOdW1iZXIgb2YgYnl0ZXMgcGVyIHdvcmQN
Cj4gICAgKiBAZGV2X2J1c3k6ICAgICAgICAgICAgICAgRGV2aWNlIGJ1c3kgZmxhZw0KPiAgICAq
IEBpc19kZWNvZGVkX2NzOiAgRmxhZyBmb3IgZGVjb2RlciBwcm9wZXJ0eSBzZXQgb3Igbm90DQo+
ICAgICogQHR4X2ZpZm9fZGVwdGg6ICBEZXB0aCBvZiB0aGUgVFggRklGTw0KPiArICogQGZpZm9f
d2lkdGg6ICAgICAgICAgICAgICBXaWR0aCBvZiB0aGUgRklGTw0KPiAgICAqIEByc3RjOiAgICAg
ICAgICAgT3B0aW9uYWwgcmVzZXQgY29udHJvbCBmb3IgU1BJIGNvbnRyb2xsZXINCj4gICAgKi8N
Cj4gICBzdHJ1Y3QgY2Ruc19zcGkgew0KPiBAQCAtMTIwLDE2ICsxMjIsMjUgQEAgc3RydWN0IGNk
bnNfc3BpIHsNCj4gICAgICAgc3RydWN0IGNsayAqcGNsazsNCj4gICAgICAgdW5zaWduZWQgaW50
IGNsa19yYXRlOw0KPiAgICAgICB1MzIgc3BlZWRfaHo7DQo+IC0gICAgIGNvbnN0IHU4ICp0eGJ1
ZjsNCj4gLSAgICAgdTggKnJ4YnVmOw0KPiArICAgICBjb25zdCB2b2lkICp0eGJ1ZjsNCj4gKyAg
ICAgdm9pZCAqcnhidWY7DQo+ICAgICAgIGludCB0eF9ieXRlczsNCj4gICAgICAgaW50IHJ4X2J5
dGVzOw0KPiArICAgICB1OCBuX2J5dGVzOw0KPiAgICAgICB1OCBkZXZfYnVzeTsNCj4gICAgICAg
dTMyIGlzX2RlY29kZWRfY3M7DQo+ICAgICAgIHVuc2lnbmVkIGludCB0eF9maWZvX2RlcHRoOw0K
PiArICAgICB1bnNpZ25lZCBpbnQgZmlmb193aWR0aDsNCj4gICAgICAgc3RydWN0IHJlc2V0X2Nv
bnRyb2wgKnJzdGM7DQo+ICAgfTsNCj4NCj4gK2VudW0gY2Ruc19zcGlfZnJhbWVfbl9ieXRlcyB7
DQo+ICsgICAgIENETlNfU1BJX05fQllURVNfTlVMTCA9IDAsDQo+ICsgICAgIENETlNfU1BJX05f
QllURVNfVTggPSAxLA0KPiArICAgICBDRE5TX1NQSV9OX0JZVEVTX1UxNiA9IDIsDQo+ICsgICAg
IENETlNfU1BJX05fQllURVNfVTMyID0gNA0KPiArfTsNCj4gKw0KPiAgIC8qIE1hY3JvcyBmb3Ig
dGhlIFNQSSBjb250cm9sbGVyIHJlYWQvd3JpdGUgKi8NCj4gICBzdGF0aWMgaW5saW5lIHUzMiBj
ZG5zX3NwaV9yZWFkKHN0cnVjdCBjZG5zX3NwaSAqeHNwaSwgdTMyIG9mZnNldCkNCj4gICB7DQo+
IEBAIC0zMDUsNiArMzE2LDc4IEBAIHN0YXRpYyBpbnQgY2Ruc19zcGlfc2V0dXBfdHJhbnNmZXIo
c3RydWN0IHNwaV9kZXZpY2UgKnNwaSwNCj4gICAgICAgcmV0dXJuIDA7DQo+ICAgfQ0KPg0KPiAr
c3RhdGljIHU4IGNkbnNfc3BpX25fYnl0ZXMoc3RydWN0IHNwaV90cmFuc2ZlciAqdHJhbnNmZXIp
DQo+ICt7DQo+ICsgICAgIGlmICh0cmFuc2Zlci0+Yml0c19wZXJfd29yZCA8PSA4KQ0KPiArICAg
ICAgICAgICAgIHJldHVybiBDRE5TX1NQSV9OX0JZVEVTX1U4Ow0KPiArICAgICBlbHNlIGlmICh0
cmFuc2Zlci0+Yml0c19wZXJfd29yZCA8PSAxNikNCj4gKyAgICAgICAgICAgICByZXR1cm4gQ0RO
U19TUElfTl9CWVRFU19VMTY7DQo+ICsgICAgIGVsc2UNCj4gKyAgICAgICAgICAgICByZXR1cm4g
Q0ROU19TUElfTl9CWVRFU19VMzI7DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCBj
ZG5zX3NwaV9yZWFkZXIoc3RydWN0IGNkbnNfc3BpICp4c3BpKQ0KPiArew0KPiArICAgICB1MzIg
cnh3ID0gMDsNCj4gKw0KPiArICAgICBpZiAoeHNwaS0+cnhidWYgJiYgIUlTX0FMSUdORUQoKHVp
bnRwdHJfdCl4c3BpLT5yeGJ1ZiwgeHNwaS0+bl9ieXRlcykpIHsNCj4gKyAgICAgICAgICAgICBw
cl9lcnIoIiVzOiByeGJ1ZiBhZGRyZXNzIGlzIG5vdCBhbGlnbmVkIGZvciAlZCBieXRlc1xuIiwN
Cj4gKyAgICAgICAgICAgICAgICAgICAgX19mdW5jX18sIHhzcGktPm5fYnl0ZXMpOw0KPiArICAg
ICAgICAgICAgIHJldHVybjsNCj4gKyAgICAgfQ0KPiArDQo+ICsgICAgIHJ4dyA9IGNkbnNfc3Bp
X3JlYWQoeHNwaSwgQ0ROU19TUElfUlhEKTsNCj4gKyAgICAgaWYgKHhzcGktPnJ4YnVmKSB7DQo+
ICsgICAgICAgICAgICAgc3dpdGNoICh4c3BpLT5uX2J5dGVzKSB7DQo+ICsgICAgICAgICAgICAg
Y2FzZSBDRE5TX1NQSV9OX0JZVEVTX1U4Og0KPiArICAgICAgICAgICAgICAgICAgICAgKih1OCAq
KXhzcGktPnJ4YnVmID0gcnh3Ow0KPiArICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ICsg
ICAgICAgICAgICAgY2FzZSBDRE5TX1NQSV9OX0JZVEVTX1UxNjoNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICoodTE2ICopeHNwaS0+cnhidWYgPSByeHc7DQo+ICsgICAgICAgICAgICAgICAgICAg
ICBicmVhazsNCj4gKyAgICAgICAgICAgICBjYXNlIENETlNfU1BJX05fQllURVNfVTMyOg0KPiAr
ICAgICAgICAgICAgICAgICAgICAgKih1MzIgKil4c3BpLT5yeGJ1ZiA9IHJ4dzsNCj4gKyAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOw0KPiArICAgICAgICAgICAgIGRlZmF1bHQ6DQo+ICsgICAg
ICAgICAgICAgICAgICAgICBwcl9lcnIoIiVzIGludmFsaWQgbl9ieXRlcyAlZFxuIiwgX19mdW5j
X18sDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHNwaS0+bl9ieXRlcyk7DQo+ICsg
ICAgICAgICAgICAgICAgICAgICByZXR1cm47DQo+ICsgICAgICAgICAgICAgfQ0KPiArICAgICAg
ICAgICAgIHhzcGktPnJ4YnVmID0gKHU4ICopeHNwaS0+cnhidWYgKyB4c3BpLT5uX2J5dGVzOw0K
PiArICAgICB9DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCBjZG5zX3NwaV93cml0
ZXIoc3RydWN0IGNkbnNfc3BpICp4c3BpKQ0KPiArew0KPiArICAgICB1MzIgdHh3ID0gMDsNCj4g
Kw0KPiArICAgICBpZiAoeHNwaS0+dHhidWYgJiYgIUlTX0FMSUdORUQoKHVpbnRwdHJfdCl4c3Bp
LT50eGJ1ZiwgeHNwaS0+bl9ieXRlcykpIHsNCj4gKyAgICAgICAgICAgICBwcl9lcnIoIiVzOiB0
eGJ1ZiBhZGRyZXNzIGlzIG5vdCBhbGlnbmVkIGZvciAlZCBieXRlc1xuIiwNCj4gKyAgICAgICAg
ICAgICAgICAgICAgX19mdW5jX18sIHhzcGktPm5fYnl0ZXMpOw0KPiArICAgICAgICAgICAgIHJl
dHVybjsNCj4gKyAgICAgfQ0KPiArDQo+ICsgICAgIGlmICh4c3BpLT50eGJ1Zikgew0KPiArICAg
ICAgICAgICAgIHN3aXRjaCAoeHNwaS0+bl9ieXRlcykgew0KPiArICAgICAgICAgICAgIGNhc2Ug
Q0ROU19TUElfTl9CWVRFU19VODoNCj4gKyAgICAgICAgICAgICAgICAgICAgIHR4dyA9ICoodTgg
Kil4c3BpLT50eGJ1ZjsNCj4gKyAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiArICAgICAg
ICAgICAgIGNhc2UgQ0ROU19TUElfTl9CWVRFU19VMTY6DQo+ICsgICAgICAgICAgICAgICAgICAg
ICB0eHcgPSAqKHUxNiAqKXhzcGktPnR4YnVmOw0KPiArICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7DQo+ICsgICAgICAgICAgICAgY2FzZSBDRE5TX1NQSV9OX0JZVEVTX1UzMjoNCj4gKyAgICAg
ICAgICAgICAgICAgICAgIHR4dyA9ICoodTMyICopeHNwaS0+dHhidWY7DQo+ICsgICAgICAgICAg
ICAgICAgICAgICBicmVhazsNCj4gKyAgICAgICAgICAgICBkZWZhdWx0Og0KPiArICAgICAgICAg
ICAgICAgICAgICAgcHJfZXJyKCIlcyBpbnZhbGlkIG5fYnl0ZXMgJWRcbiIsIF9fZnVuY19fLA0K
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhzcGktPm5fYnl0ZXMpOw0KPiArICAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuOw0KPiArICAgICAgICAgICAgIH0NCj4gKyAgICAgICAgICAg
ICBjZG5zX3NwaV93cml0ZSh4c3BpLCBDRE5TX1NQSV9UWEQsIHR4dyk7DQo+ICsgICAgICAgICAg
ICAgeHNwaS0+dHhidWYgPSAodTggKil4c3BpLT50eGJ1ZiArIHhzcGktPm5fYnl0ZXM7DQo+ICsg
ICAgIH0NCj4gK30NCj4gKw0KPiAgIC8qKg0KPiAgICAqIGNkbnNfc3BpX3Byb2Nlc3NfZmlmbyAt
IEZpbGxzIHRoZSBUWCBGSUZPLCBhbmQgZHJhaW4gdGhlIFJYIEZJRk8NCj4gICAgKiBAeHNwaTog
ICBQb2ludGVyIHRvIHRoZSBjZG5zX3NwaSBzdHJ1Y3R1cmUNCj4gQEAgLTMyMSwyMyArNDA0LDE0
IEBAIHN0YXRpYyB2b2lkIGNkbnNfc3BpX3Byb2Nlc3NfZmlmbyhzdHJ1Y3QgY2Ruc19zcGkgKnhz
cGksIGludCBudHgsIGludCBucngpDQo+DQo+ICAgICAgIHdoaWxlIChudHggfHwgbnJ4KSB7DQo+
ICAgICAgICAgICAgICAgaWYgKG5yeCkgew0KPiAtICAgICAgICAgICAgICAgICAgICAgdTggZGF0
YSA9IGNkbnNfc3BpX3JlYWQoeHNwaSwgQ0ROU19TUElfUlhEKTsNCj4gLQ0KPiAtICAgICAgICAg
ICAgICAgICAgICAgaWYgKHhzcGktPnJ4YnVmKQ0KPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAqeHNwaS0+cnhidWYrKyA9IGRhdGE7DQo+IC0NCj4gKyAgICAgICAgICAgICAgICAgICAg
IGNkbnNfc3BpX3JlYWRlcih4c3BpKTsNCj4gICAgICAgICAgICAgICAgICAgICAgIG5yeC0tOw0K
PiAgICAgICAgICAgICAgIH0NCj4NCj4gICAgICAgICAgICAgICBpZiAobnR4KSB7DQo+IC0gICAg
ICAgICAgICAgICAgICAgICBpZiAoeHNwaS0+dHhidWYpDQo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGNkbnNfc3BpX3dyaXRlKHhzcGksIENETlNfU1BJX1RYRCwgKnhzcGktPnR4YnVm
KyspOw0KPiAtICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjZG5zX3NwaV93cml0ZSh4c3BpLCBDRE5TX1NQSV9UWEQsIDApOw0KPiAtDQo+
ICsgICAgICAgICAgICAgICAgICAgICBjZG5zX3NwaV93cml0ZXIoeHNwaSk7DQo+ICAgICAgICAg
ICAgICAgICAgICAgICBudHgtLTsNCj4gICAgICAgICAgICAgICB9DQo+IC0NCj4gICAgICAgfQ0K
PiAgIH0NCj4NCj4gQEAgLTQ1NCw2ICs1MjgsMTAgQEAgc3RhdGljIGludCBjZG5zX3RyYW5zZmVy
X29uZShzdHJ1Y3Qgc3BpX2NvbnRyb2xsZXIgKmN0bHIsDQo+ICAgICAgIGlmIChjZG5zX3NwaV9y
ZWFkKHhzcGksIENETlNfU1BJX0lTUikgJiBDRE5TX1NQSV9JWFJfVFhGVUxMKQ0KPiAgICAgICAg
ICAgICAgIHVkZWxheSgxMCk7DQo+DQo+ICsgICAgIHhzcGktPm5fYnl0ZXMgPSBjZG5zX3NwaV9u
X2J5dGVzKHRyYW5zZmVyKTsNCj4gKyAgICAgeHNwaS0+dHhfYnl0ZXMgPSBESVZfUk9VTkRfVVAo
eHNwaS0+dHhfYnl0ZXMsIHhzcGktPm5fYnl0ZXMpOw0KPiArICAgICB4c3BpLT5yeF9ieXRlcyA9
IERJVl9ST1VORF9VUCh4c3BpLT5yeF9ieXRlcywgeHNwaS0+bl9ieXRlcyk7DQo+ICsNCj4gICAg
ICAgY2Ruc19zcGlfcHJvY2Vzc19maWZvKHhzcGksIHhzcGktPnR4X2ZpZm9fZGVwdGgsIDApOw0K
Pg0KPiAgICAgICBjZG5zX3NwaV93cml0ZSh4c3BpLCBDRE5TX1NQSV9JRVIsIENETlNfU1BJX0lY
Ul9ERUZBVUxUKTsNCj4gQEAgLTY1NCw2ICs3MzIsMjcgQEAgc3RhdGljIGludCBjZG5zX3NwaV9w
cm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQ0KPiAgICAgICBjdGxyLT5tb2RlX2Jp
dHMgPSBTUElfQ1BPTCB8IFNQSV9DUEhBOw0KPiAgICAgICBjdGxyLT5iaXRzX3Blcl93b3JkX21h
c2sgPSBTUElfQlBXX01BU0soOCk7DQo+DQo+ICsgICAgIGlmICghZGV2aWNlX3Byb3BlcnR5X3Jl
YWRfdTMyKCZwZGV2LT5kZXYsICJmaWZvLXdpZHRoIiwNCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJnhzcGktPmZpZm9fd2lkdGgpKSB7DQo+ICsgICAgICAgICAgICAgc3dp
dGNoICh4c3BpLT5maWZvX3dpZHRoKSB7DQo+ICsgICAgICAgICAgICAgY2FzZSA4Og0KPiArICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ICsgICAgICAgICAgICAgY2FzZSAxNjoNCj4gKyAg
ICAgICAgICAgICAgICAgICAgIGN0bHItPmJpdHNfcGVyX3dvcmRfbWFzayB8PSBTUElfQlBXX01B
U0soMTYpOw0KPiArICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ICsgICAgICAgICAgICAg
Y2FzZSAzMjoNCj4gKyAgICAgICAgICAgICAgICAgICAgIGN0bHItPmJpdHNfcGVyX3dvcmRfbWFz
ayB8PQ0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU1BJX0JQV19NQVNLKDE2KSB8
IFNQSV9CUFdfTUFTSygzMikpOw0KPiArICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ICsg
ICAgICAgICAgICAgZGVmYXVsdDoNCj4gKyAgICAgICAgICAgICAgICAgICAgIGRldl93YXJuKA0K
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmcGRldi0+ZGV2LA0KPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAiVW5zdXBwb3J0ZWQgRklGTyB3aWR0aDogJXUuIFVzaW5nIGRl
ZmF1bHQgYml0LXdpZHRoIG1hc2suXG4iLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB4c3BpLT5maWZvX3dpZHRoKTsNCj4gKyAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiAr
ICAgICAgICAgICAgIH0NCj4gKyAgICAgfQ0KPiArDQo+ICAgICAgIGlmICghc3BpX2NvbnRyb2xs
ZXJfaXNfdGFyZ2V0KGN0bHIpKSB7DQo+ICAgICAgICAgICAgICAgY3Rsci0+bW9kZV9iaXRzIHw9
ICBTUElfQ1NfSElHSDsNCj4gICAgICAgICAgICAgICBjdGxyLT5zZXRfY3MgPSBjZG5zX3NwaV9j
aGlwc2VsZWN0Ow0KaGkgTWFyaywgY291bGQgeW91IHBsZWFzZSB0YWtlIHNvbWUgdGltZSB0byBy
ZXZpZXcgdGhlIGN1cnJlbnQgcGF0Y2g/DQpJIGxvb2sgZm9yd2FyZCB0byB5b3VyIGNvbW1lbnRz
IGF0IHlvdXIgZWFybGllc3QgY29udmVuaWVuY2UuDQoNCkJlc3Qgd2lzaGVzLA0KSnVuIEd1bw0K
DQoNCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0Kt6K8/sjLOiBK
dW4gR3VvIDxqdW4uZ3VvQGNpeHRlY2guY29tPg0Kt6LLzcqxvOQ6IDIwMjXE6jnUwjMwyNUgMTU6
NTYNCsrVvP7IyzogUGV0ZXIgQ2hlbjsgRnVnYW5nIER1YW47IHJvYmhAa2VybmVsLm9yZzsga3J6
aytkdEBrZXJuZWwub3JnOyBjb25vcitkdEBrZXJuZWwub3JnOyBicm9vbmllQGtlcm5lbC5vcmcN
CrOty806IGxpbnV4LXNwaUB2Z2VyLmtlcm5lbC5vcmc7IG1pY2hhbC5zaW1la0BhbWQuY29tOyBj
aXgta2VybmVsLXVwc3RyZWFtOyBsaW51eC1hcm0ta2VybmVsQGxpc3RzLmluZnJhZGVhZC5vcmc7
IGRldmljZXRyZWVAdmdlci5rZXJuZWwub3JnOyBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3Jn
OyBKdW4gR3VvDQrW98ziOiBbUEFUQ0ggMi8zXSBzcGk6IHNwaS1jYWRlbmNlOiBzdXBwb3J0cyB0
cmFuc21pc3Npb24gd2l0aCBiaXRzX3Blcl93b3JkIG9mIDE2IGFuZCAzMg0KDQpUaGUgQ2FkZW5j
ZSBJUCBzdXBwb3J0cyBjb25maWd1cmFibGUgRklGTyBkYXRhIHdpZHRocyBvZiAxNiBiaXRzIG9y
DQozMiBiaXRzIGR1cmluZyBpbnRlZ3JhdGlvbi4gVGhlIGRlZmF1bHQgRklGTyBkYXRhIHdpZHRo
IGlzIDggYml0cy4NCklmIHRoZSBjaGlwIGRlc2lnbiBtb2RpZmllcyB0aGUgRklGTyBkYXRhIHdp
ZHRoIHRvIDE2IGJpdHMgb3IgMzIgYml0cywNCnRoZSBmaWZvLXdpZHRoIHByb3BlcnR5IGNhbiBi
ZSBjb25maWd1cmVkIGluIHRoZSBmaXJtd2FyZSAoRFQvQUNQSSkNCnRvIGVuYWJsZSB0aGUgZHJp
dmVyIHRvIHN1cHBvcnQgZGF0YSB0cmFuc2ZlcnMgYXQgdGhlIGNvcnJlc3BvbmRpbmcgd2lkdGgu
DQoNClNpZ25lZC1vZmYtYnk6IEp1biBHdW8gPGp1bi5ndW9AY2l4dGVjaC5jb20+DQotLS0NCiBk
cml2ZXJzL3NwaS9zcGktY2FkZW5jZS5jIHwgMTI1ICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKystLS0tDQogMSBmaWxlIGNoYW5nZWQsIDExMiBpbnNlcnRpb25zKCspLCAxMyBkZWxl
dGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3BpL3NwaS1jYWRlbmNlLmMgYi9kcml2
ZXJzL3NwaS9zcGktY2FkZW5jZS5jDQppbmRleCA1YWUwOWIyMWQyM2EuLmU5MWM2YWZiZWNlOSAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvc3BpL3NwaS1jYWRlbmNlLmMNCisrKyBiL2RyaXZlcnMvc3Bp
L3NwaS1jYWRlbmNlLmMNCkBAIC0xMDksOSArMTA5LDExIEBADQogICogQHJ4YnVmOiAgICAgICAg
ICAgICBQb2ludGVyIHRvIHRoZSBSWCBidWZmZXINCiAgKiBAdHhfYnl0ZXM6ICAgICAgICAgIE51
bWJlciBvZiBieXRlcyBsZWZ0IHRvIHRyYW5zZmVyDQogICogQHJ4X2J5dGVzOiAgICAgICAgICBO
dW1iZXIgb2YgYnl0ZXMgcmVxdWVzdGVkDQorICogQG5fYnl0ZXM6ICAgICAgICAgICBOdW1iZXIg
b2YgYnl0ZXMgcGVyIHdvcmQNCiAgKiBAZGV2X2J1c3k6ICAgICAgICAgIERldmljZSBidXN5IGZs
YWcNCiAgKiBAaXNfZGVjb2RlZF9jczogICAgIEZsYWcgZm9yIGRlY29kZXIgcHJvcGVydHkgc2V0
IG9yIG5vdA0KICAqIEB0eF9maWZvX2RlcHRoOiAgICAgRGVwdGggb2YgdGhlIFRYIEZJRk8NCisg
KiBAZmlmb193aWR0aDogICAgICAgICAgICAgICAgV2lkdGggb2YgdGhlIEZJRk8NCiAgKiBAcnN0
YzogICAgICAgICAgICAgIE9wdGlvbmFsIHJlc2V0IGNvbnRyb2wgZm9yIFNQSSBjb250cm9sbGVy
DQogICovDQogc3RydWN0IGNkbnNfc3BpIHsNCkBAIC0xMjAsMTYgKzEyMiwyNSBAQCBzdHJ1Y3Qg
Y2Ruc19zcGkgew0KICAgICAgICBzdHJ1Y3QgY2xrICpwY2xrOw0KICAgICAgICB1bnNpZ25lZCBp
bnQgY2xrX3JhdGU7DQogICAgICAgIHUzMiBzcGVlZF9oejsNCi0gICAgICAgY29uc3QgdTggKnR4
YnVmOw0KLSAgICAgICB1OCAqcnhidWY7DQorICAgICAgIGNvbnN0IHZvaWQgKnR4YnVmOw0KKyAg
ICAgICB2b2lkICpyeGJ1ZjsNCiAgICAgICAgaW50IHR4X2J5dGVzOw0KICAgICAgICBpbnQgcnhf
Ynl0ZXM7DQorICAgICAgIHU4IG5fYnl0ZXM7DQogICAgICAgIHU4IGRldl9idXN5Ow0KICAgICAg
ICB1MzIgaXNfZGVjb2RlZF9jczsNCiAgICAgICAgdW5zaWduZWQgaW50IHR4X2ZpZm9fZGVwdGg7
DQorICAgICAgIHVuc2lnbmVkIGludCBmaWZvX3dpZHRoOw0KICAgICAgICBzdHJ1Y3QgcmVzZXRf
Y29udHJvbCAqcnN0YzsNCiB9Ow0KDQorZW51bSBjZG5zX3NwaV9mcmFtZV9uX2J5dGVzIHsNCisg
ICAgICAgQ0ROU19TUElfTl9CWVRFU19OVUxMID0gMCwNCisgICAgICAgQ0ROU19TUElfTl9CWVRF
U19VOCA9IDEsDQorICAgICAgIENETlNfU1BJX05fQllURVNfVTE2ID0gMiwNCisgICAgICAgQ0RO
U19TUElfTl9CWVRFU19VMzIgPSA0DQorfTsNCisNCiAvKiBNYWNyb3MgZm9yIHRoZSBTUEkgY29u
dHJvbGxlciByZWFkL3dyaXRlICovDQogc3RhdGljIGlubGluZSB1MzIgY2Ruc19zcGlfcmVhZChz
dHJ1Y3QgY2Ruc19zcGkgKnhzcGksIHUzMiBvZmZzZXQpDQogew0KQEAgLTMwNSw2ICszMTYsNzgg
QEAgc3RhdGljIGludCBjZG5zX3NwaV9zZXR1cF90cmFuc2ZlcihzdHJ1Y3Qgc3BpX2RldmljZSAq
c3BpLA0KICAgICAgICByZXR1cm4gMDsNCiB9DQoNCitzdGF0aWMgdTggY2Ruc19zcGlfbl9ieXRl
cyhzdHJ1Y3Qgc3BpX3RyYW5zZmVyICp0cmFuc2ZlcikNCit7DQorICAgICAgIGlmICh0cmFuc2Zl
ci0+Yml0c19wZXJfd29yZCA8PSA4KQ0KKyAgICAgICAgICAgICAgIHJldHVybiBDRE5TX1NQSV9O
X0JZVEVTX1U4Ow0KKyAgICAgICBlbHNlIGlmICh0cmFuc2Zlci0+Yml0c19wZXJfd29yZCA8PSAx
NikNCisgICAgICAgICAgICAgICByZXR1cm4gQ0ROU19TUElfTl9CWVRFU19VMTY7DQorICAgICAg
IGVsc2UNCisgICAgICAgICAgICAgICByZXR1cm4gQ0ROU19TUElfTl9CWVRFU19VMzI7DQorfQ0K
Kw0KK3N0YXRpYyBpbmxpbmUgdm9pZCBjZG5zX3NwaV9yZWFkZXIoc3RydWN0IGNkbnNfc3BpICp4
c3BpKQ0KK3sNCisgICAgICAgdTMyIHJ4dyA9IDA7DQorDQorICAgICAgIGlmICh4c3BpLT5yeGJ1
ZiAmJiAhSVNfQUxJR05FRCgodWludHB0cl90KXhzcGktPnJ4YnVmLCB4c3BpLT5uX2J5dGVzKSkg
ew0KKyAgICAgICAgICAgICAgIHByX2VycigiJXM6IHJ4YnVmIGFkZHJlc3MgaXMgbm90IGFsaWdu
ZWQgZm9yICVkIGJ5dGVzXG4iLA0KKyAgICAgICAgICAgICAgICAgICAgICBfX2Z1bmNfXywgeHNw
aS0+bl9ieXRlcyk7DQorICAgICAgICAgICAgICAgcmV0dXJuOw0KKyAgICAgICB9DQorDQorICAg
ICAgIHJ4dyA9IGNkbnNfc3BpX3JlYWQoeHNwaSwgQ0ROU19TUElfUlhEKTsNCisgICAgICAgaWYg
KHhzcGktPnJ4YnVmKSB7DQorICAgICAgICAgICAgICAgc3dpdGNoICh4c3BpLT5uX2J5dGVzKSB7
DQorICAgICAgICAgICAgICAgY2FzZSBDRE5TX1NQSV9OX0JZVEVTX1U4Og0KKyAgICAgICAgICAg
ICAgICAgICAgICAgKih1OCAqKXhzcGktPnJ4YnVmID0gcnh3Ow0KKyAgICAgICAgICAgICAgICAg
ICAgICAgYnJlYWs7DQorICAgICAgICAgICAgICAgY2FzZSBDRE5TX1NQSV9OX0JZVEVTX1UxNjoN
CisgICAgICAgICAgICAgICAgICAgICAgICoodTE2ICopeHNwaS0+cnhidWYgPSByeHc7DQorICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsNCisgICAgICAgICAgICAgICBjYXNlIENETlNfU1BJ
X05fQllURVNfVTMyOg0KKyAgICAgICAgICAgICAgICAgICAgICAgKih1MzIgKil4c3BpLT5yeGJ1
ZiA9IHJ4dzsNCisgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KKyAgICAgICAgICAgICAg
IGRlZmF1bHQ6DQorICAgICAgICAgICAgICAgICAgICAgICBwcl9lcnIoIiVzIGludmFsaWQgbl9i
eXRlcyAlZFxuIiwgX19mdW5jX18sDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHNw
aS0+bl9ieXRlcyk7DQorICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQorICAgICAgICAg
ICAgICAgfQ0KKyAgICAgICAgICAgICAgIHhzcGktPnJ4YnVmID0gKHU4ICopeHNwaS0+cnhidWYg
KyB4c3BpLT5uX2J5dGVzOw0KKyAgICAgICB9DQorfQ0KKw0KK3N0YXRpYyBpbmxpbmUgdm9pZCBj
ZG5zX3NwaV93cml0ZXIoc3RydWN0IGNkbnNfc3BpICp4c3BpKQ0KK3sNCisgICAgICAgdTMyIHR4
dyA9IDA7DQorDQorICAgICAgIGlmICh4c3BpLT50eGJ1ZiAmJiAhSVNfQUxJR05FRCgodWludHB0
cl90KXhzcGktPnR4YnVmLCB4c3BpLT5uX2J5dGVzKSkgew0KKyAgICAgICAgICAgICAgIHByX2Vy
cigiJXM6IHR4YnVmIGFkZHJlc3MgaXMgbm90IGFsaWduZWQgZm9yICVkIGJ5dGVzXG4iLA0KKyAg
ICAgICAgICAgICAgICAgICAgICBfX2Z1bmNfXywgeHNwaS0+bl9ieXRlcyk7DQorICAgICAgICAg
ICAgICAgcmV0dXJuOw0KKyAgICAgICB9DQorDQorICAgICAgIGlmICh4c3BpLT50eGJ1Zikgew0K
KyAgICAgICAgICAgICAgIHN3aXRjaCAoeHNwaS0+bl9ieXRlcykgew0KKyAgICAgICAgICAgICAg
IGNhc2UgQ0ROU19TUElfTl9CWVRFU19VODoNCisgICAgICAgICAgICAgICAgICAgICAgIHR4dyA9
ICoodTggKil4c3BpLT50eGJ1ZjsNCisgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KKyAg
ICAgICAgICAgICAgIGNhc2UgQ0ROU19TUElfTl9CWVRFU19VMTY6DQorICAgICAgICAgICAgICAg
ICAgICAgICB0eHcgPSAqKHUxNiAqKXhzcGktPnR4YnVmOw0KKyAgICAgICAgICAgICAgICAgICAg
ICAgYnJlYWs7DQorICAgICAgICAgICAgICAgY2FzZSBDRE5TX1NQSV9OX0JZVEVTX1UzMjoNCisg
ICAgICAgICAgICAgICAgICAgICAgIHR4dyA9ICoodTMyICopeHNwaS0+dHhidWY7DQorICAgICAg
ICAgICAgICAgICAgICAgICBicmVhazsNCisgICAgICAgICAgICAgICBkZWZhdWx0Og0KKyAgICAg
ICAgICAgICAgICAgICAgICAgcHJfZXJyKCIlcyBpbnZhbGlkIG5fYnl0ZXMgJWRcbiIsIF9fZnVu
Y19fLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhzcGktPm5fYnl0ZXMpOw0KKyAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KKyAgICAgICAgICAgICAgIH0NCisgICAgICAg
ICAgICAgICBjZG5zX3NwaV93cml0ZSh4c3BpLCBDRE5TX1NQSV9UWEQsIHR4dyk7DQorICAgICAg
ICAgICAgICAgeHNwaS0+dHhidWYgPSAodTggKil4c3BpLT50eGJ1ZiArIHhzcGktPm5fYnl0ZXM7
DQorICAgICAgIH0NCit9DQorDQogLyoqDQogICogY2Ruc19zcGlfcHJvY2Vzc19maWZvIC0gRmls
bHMgdGhlIFRYIEZJRk8sIGFuZCBkcmFpbiB0aGUgUlggRklGTw0KICAqIEB4c3BpOiAgICAgIFBv
aW50ZXIgdG8gdGhlIGNkbnNfc3BpIHN0cnVjdHVyZQ0KQEAgLTMyMSwyMyArNDA0LDE0IEBAIHN0
YXRpYyB2b2lkIGNkbnNfc3BpX3Byb2Nlc3NfZmlmbyhzdHJ1Y3QgY2Ruc19zcGkgKnhzcGksIGlu
dCBudHgsIGludCBucngpDQoNCiAgICAgICAgd2hpbGUgKG50eCB8fCBucngpIHsNCiAgICAgICAg
ICAgICAgICBpZiAobnJ4KSB7DQotICAgICAgICAgICAgICAgICAgICAgICB1OCBkYXRhID0gY2Ru
c19zcGlfcmVhZCh4c3BpLCBDRE5TX1NQSV9SWEQpOw0KLQ0KLSAgICAgICAgICAgICAgICAgICAg
ICAgaWYgKHhzcGktPnJ4YnVmKQ0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqeHNw
aS0+cnhidWYrKyA9IGRhdGE7DQotDQorICAgICAgICAgICAgICAgICAgICAgICBjZG5zX3NwaV9y
ZWFkZXIoeHNwaSk7DQogICAgICAgICAgICAgICAgICAgICAgICBucngtLTsNCiAgICAgICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobnR4KSB7DQotICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoeHNwaS0+dHhidWYpDQotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNk
bnNfc3BpX3dyaXRlKHhzcGksIENETlNfU1BJX1RYRCwgKnhzcGktPnR4YnVmKyspOw0KLSAgICAg
ICAgICAgICAgICAgICAgICAgZWxzZQ0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
ZG5zX3NwaV93cml0ZSh4c3BpLCBDRE5TX1NQSV9UWEQsIDApOw0KLQ0KKyAgICAgICAgICAgICAg
ICAgICAgICAgY2Ruc19zcGlfd3JpdGVyKHhzcGkpOw0KICAgICAgICAgICAgICAgICAgICAgICAg
bnR4LS07DQogICAgICAgICAgICAgICAgfQ0KLQ0KICAgICAgICB9DQogfQ0KDQpAQCAtNDU0LDYg
KzUyOCwxMCBAQCBzdGF0aWMgaW50IGNkbnNfdHJhbnNmZXJfb25lKHN0cnVjdCBzcGlfY29udHJv
bGxlciAqY3RsciwNCiAgICAgICAgaWYgKGNkbnNfc3BpX3JlYWQoeHNwaSwgQ0ROU19TUElfSVNS
KSAmIENETlNfU1BJX0lYUl9UWEZVTEwpDQogICAgICAgICAgICAgICAgdWRlbGF5KDEwKTsNCg0K
KyAgICAgICB4c3BpLT5uX2J5dGVzID0gY2Ruc19zcGlfbl9ieXRlcyh0cmFuc2Zlcik7DQorICAg
ICAgIHhzcGktPnR4X2J5dGVzID0gRElWX1JPVU5EX1VQKHhzcGktPnR4X2J5dGVzLCB4c3BpLT5u
X2J5dGVzKTsNCisgICAgICAgeHNwaS0+cnhfYnl0ZXMgPSBESVZfUk9VTkRfVVAoeHNwaS0+cnhf
Ynl0ZXMsIHhzcGktPm5fYnl0ZXMpOw0KKw0KICAgICAgICBjZG5zX3NwaV9wcm9jZXNzX2ZpZm8o
eHNwaSwgeHNwaS0+dHhfZmlmb19kZXB0aCwgMCk7DQoNCiAgICAgICAgY2Ruc19zcGlfd3JpdGUo
eHNwaSwgQ0ROU19TUElfSUVSLCBDRE5TX1NQSV9JWFJfREVGQVVMVCk7DQpAQCAtNjU0LDYgKzcz
MiwyNyBAQCBzdGF0aWMgaW50IGNkbnNfc3BpX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2Ug
KnBkZXYpDQogICAgICAgIGN0bHItPm1vZGVfYml0cyA9IFNQSV9DUE9MIHwgU1BJX0NQSEE7DQog
ICAgICAgIGN0bHItPmJpdHNfcGVyX3dvcmRfbWFzayA9IFNQSV9CUFdfTUFTSyg4KTsNCg0KKyAg
ICAgICBpZiAoIWRldmljZV9wcm9wZXJ0eV9yZWFkX3UzMigmcGRldi0+ZGV2LCAiZmlmby13aWR0
aCIsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ4c3BpLT5maWZvX3dp
ZHRoKSkgew0KKyAgICAgICAgICAgICAgIHN3aXRjaCAoeHNwaS0+Zmlmb193aWR0aCkgew0KKyAg
ICAgICAgICAgICAgIGNhc2UgODoNCisgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KKyAg
ICAgICAgICAgICAgIGNhc2UgMTY6DQorICAgICAgICAgICAgICAgICAgICAgICBjdGxyLT5iaXRz
X3Blcl93b3JkX21hc2sgfD0gU1BJX0JQV19NQVNLKDE2KTsNCisgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrOw0KKyAgICAgICAgICAgICAgIGNhc2UgMzI6DQorICAgICAgICAgICAgICAgICAg
ICAgICBjdGxyLT5iaXRzX3Blcl93b3JkX21hc2sgfD0NCisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKFNQSV9CUFdfTUFTSygxNikgfCBTUElfQlBXX01BU0soMzIpKTsNCisgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOw0KKyAgICAgICAgICAgICAgIGRlZmF1bHQ6DQorICAgICAg
ICAgICAgICAgICAgICAgICBkZXZfd2FybigNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJnBkZXYtPmRldiwNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVuc3VwcG9y
dGVkIEZJRk8gd2lkdGg6ICV1LiBVc2luZyBkZWZhdWx0IGJpdC13aWR0aCBtYXNrLlxuIiwNCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHNwaS0+Zmlmb193aWR0aCk7DQorICAgICAg
ICAgICAgICAgICAgICAgICBicmVhazsNCisgICAgICAgICAgICAgICB9DQorICAgICAgIH0NCisN
CiAgICAgICAgaWYgKCFzcGlfY29udHJvbGxlcl9pc190YXJnZXQoY3RscikpIHsNCiAgICAgICAg
ICAgICAgICBjdGxyLT5tb2RlX2JpdHMgfD0gIFNQSV9DU19ISUdIOw0KICAgICAgICAgICAgICAg
IGN0bHItPnNldF9jcyA9IGNkbnNfc3BpX2NoaXBzZWxlY3Q7DQotLQ0KMi4zNC4xDQoNCg==

